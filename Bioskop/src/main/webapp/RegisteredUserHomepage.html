	<div class="container">
	 <h2>Registered User Page</h2>
	  <!-- Trigger the modal with a button -->
	  <button id="update-profile-btn" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#modal"   data-keyboard="false">Update Profile</button>
	  <button id="view-profile-btn" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#view-profile"   data-keyboard="false">View Profile Info</button>
	  <button id="reservation1-btn" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#reservation1"   data-keyboard="false">Reservation: step1</button>
	  <button id="reservation2-btn" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#reservation2"   data-keyboard="false">Reservation: step2</button>
	  
	  <!-- Modal -->
	  <div class="modal fade" id="modal" role="dialog">
	    <div class="modal-dialog">
	    
	      <!-- Modal content-->
	      <div class="modal-content">
	        <div class="row centered-form">
	        <div class="col-xs-12 col-sm-12 col-md-12 ">
	        	<div class="panel panel-default">
	        		<div class="panel-heading">
				    		<h3 class="panel-title">Please enter new profile information </h3>
				 			</div>
				 			<div class="panel-body">
				    		<form role="form" id="form">
				    			<div class="row">
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<div class="form-group">
				                			<input type="text" name="firstName" id="firstName" class="form-control input-sm" placeholder="First Name">
				    					</div>
				    				</div>
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<div class="form-group">
				    						<input type="text" name="lastName" id="lastName" class="form-control input-sm" placeholder="Last Name">							    					</div>
				    				</div>
				    			</div>
				    			
				    			<div class="row">
				    				<div class="col-xs-6 col-sm-6 col-md-6" >
				    					<div class="form-group">
				    						<input type="email" name="email" id="email" class="form-control input-sm" placeholder="Email Address">
				    					</div>
				    				</div>
				    				<div class="col-xs-6 col-sm-6 col-md-6" >
				    					<div class="form-group">
				    						<input type="text" name="username" id="username" class="form-control input-sm" placeholder="Username">
				    					</div>
				    				</div>	
				    			</div>
				    			
				    			
				    			<div class="row">
				    				<div class="col-xs-6 col-sm-6 col-md-6" >
				    					<div class="form-group">
				    						<input type="password" name="password" id="password" class="form-control input-sm" placeholder="Password">
				    					</div>
				    				</div>
				    				<div class="col-xs-6 col-sm-6 col-md-6" >
				    					<div class="form-group">
				    						<input type="password" name="password-confirm" id="password-confirm" class="form-control input-sm" placeholder="Confirm Password">
				    					</div>
				    				</div>
				    			</div>
				    			
				    			
				    			<div class="row">
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<div class="form-group">
				    						<input type="text" name="city" id="city" class="form-control input-sm" placeholder="City">
				    					</div>
				    				</div>
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<div class="form-group">
				    						<input type="text" name="street" id="street" class="form-control input-sm" placeholder="Street" >
				    					</div>
				    				</div>
				    			</div>
				    			
				    			<div class="row">	
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<button  id="update-btn" type="button" class="btn btn-info">Update</button>
				    				</div>
				    			</div>
				    		</form>
				    	</div>
		    		</div>
	    		</div>
	    	</div>	
	    </div>
	  </div>
	  </div> 
	  
	  
	  	  <!-- Modal -->
	  <div class="modal fade" id="view-profile" role="dialog">
	    <div class="modal-dialog">
	    
	      <!-- Modal content-->
	      <div class="modal-content">
	        <div class="table-responsive">
	        <table class="table">
	            
			    <tbody>
			      <tr>
			        <td>First Name</td>
			        <td id="firstname-text"></td>
			      </tr>
			      <tr>
			        <td>Last Name</td>
			        <td id="lastname-text"></td>
			      </tr>
			      <tr>
			        <td>E-Mail</td>
			        <td id="email-text"></td>
			      </tr>
			      <tr>
			        <td>Username</td>
			        <td id="username-text"></td>
			      </tr>
			      <tr>
			        <td>City</td>
			        <td id="city-text"></td>
			      </tr>
			      <tr>
			        <td>Street</td>
			        <td id="street-text"></td>
			      </tr>
			    </tbody>
	        
	        
	        
	        </table>
	        </div>	
	    </div>
	  </div>
	  </div>
	  
	  
	  	  <!-- Modal -->
	  <div class="modal fade" id="reservation1" role="dialog">
	    <div class="modal-dialog">
	    
	      <!-- Modal content-->
	      <div class="modal-content">
	        <div class="row centered-form">
	        <div class="col-xs-12 col-sm-12 col-md-12 ">
	        	<div class="panel panel-default">
	        		<div class="panel-heading">
				    		<h3 class="panel-title">Reservation Dialog 1 </h3>
				 			</div>
				 			<div class="panel-body">
				    		<form role="form" id="form">
				    			<div class="row">
				    				<div class="col-xs-6 col-sm-6 col-md-6">
			                			<label for="select1">Select cinema or theater:</label>
 											<select class="form-control" id="CorT-select">
	 	
											</select>
				    				</div>			    				
				    			</div>
				    			<div class="row">	
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<button  id="reservation1-confirm-btn" type="button" class="btn btn-info" onclick="confirmReservation1()">Next</button>
				    				</div>
				    			</div>
				    		</form>
				    	</div>
		    		</div>
	    		</div>
	    	</div>	        
	        	
	    </div>
	  </div>
	  </div>
	  

	  	  <!-- Modal -->
	  <div class="modal fade" id="reservation2" role="dialog">
	    <div class="modal-dialog">
	    
	      <!-- Modal content-->
	      <div class="modal-content">
	        <div class="row centered-form">
	        <div class="col-xs-12 col-sm-12 col-md-12 ">
	        	<div class="panel panel-default">
	        		<div class="panel-heading">
				    		<h3 class="panel-title">Reservation Dialog 2 </h3>
				 			</div>
				 			<div class="panel-body">
				    		<form role="form" id="form">
				    			<div class="row">
				    				<div class="col-xs-6 col-sm-6 col-md-6">
			                			<label for="select1">Select movie or performance:</label>
 											<select class="form-control" id="MorP-select">
	 	
											</select>
				    				</div>			    				
				    			</div>
				    			<div class="row">	
				    				<div class="col-xs-6 col-sm-6 col-md-6">
				    					<button  id="reservation2-confirm-btn" type="button" class="btn btn-info" onclick="confirmReservation1()">Next</button>
				    				</div>
				    			</div>
				    		</form>
				    	</div>
		    		</div>
	    		</div>
	    	</div>	        
	        	
	    </div>
	  </div>
	  </div>	  
	  

	  </div>


	<script type="text/javascript" src="ReservationLoadData.js"></script>

	<script>
		
		loadCinemas();
		document.getElementById("reservation2-btn").disabled = true;
	
		$('#modal').on('hidden.bs.modal', function(){
	    	$(this).find('form')[0].reset();
		});
		
		
		$("#update-profile-btn").click(function(){
			$.getJSON("/api/getLoggedUser", function(loggedUser) {
				$("#username").val(loggedUser.username);
				$("#city").val(loggedUser.address.city);
				$("#street").val(loggedUser.address.street);
				$("#email").val(loggedUser.email);
				$("#firstName").val(loggedUser.firstName);
				$("#lastName").val(loggedUser.lastName);
				$("#password").val(loggedUser.password);
				$("#password-confirm").val(loggedUser.password);
			});
		});
		
		
		$("#update-btn").click(function(){
			var changedUser = {};
			changedUser.username = $("#username").val();
			changedUser.password = $("#password").val();
			changedUser.userType = "REGISTEREDUSER";
			var address = { "city" : $("#city").val(), "street" : $("#street").val()};

			changedUser.address = address;
			changedUser.email = $("#email").val();
			changedUser.firstName = $("#firstName").val();
			changedUser.lastName = $("#lastName").val();
			
			var success = false;
			var retUser = null;
			
			
			$.ajax({
				type: "POST",
				url: "/api/changeProfile",
				data: JSON.stringify(changedUser),
				dataType: "json",
				success: function(response) { 
					alert("Uspesno ste izmenili profil!");
					alert(response);
					$("#modal").modal('toggle');
				},
				error: function() {
					alert("nije uspela izmena!");
					$("modal").modal('toggle')
				},
				contentType: "application/json",
				
			});
			
		});
	
	</script>
	
	<script>
	
		$("#view-profile-btn").click(function() {
			
			$.getJSON("/api/getLoggedUser", function(loggedUser) {
				document.getElementById("firstname-text").innerHTML = loggedUser.firstName;
				document.getElementById("lastname-text").innerHTML = loggedUser.lastName;
				document.getElementById("email-text").innerHTML = loggedUser.email;
				document.getElementById("username-text").innerHTML = loggedUser.username;
				document.getElementById("city-text").innerHTML = loggedUser.address.city;
				document.getElementById("street-text").innerHTML = loggedUser.address.street;
			});
		});
	
	</script>